(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{190:function(e,t,n){e.exports=n(422)},195:function(e,t,n){},196:function(e,t,n){},422:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(16),c=n.n(i),o=(n(195),n(26)),l=n(27),u=n(29),s=n(28),h=n(30),p=(n(196),n(9)),d=n(41),f=n(48),m=n(12),b=n(161),v=n(162),g=n.n(v),y=(n(10),n(148)),O=n(18);function j(){var e=Object(m.a)(["\n  pointer-events: ",";\n  color: white;\n"]);return j=function(){return e},e}var E=p.b.div(j(),function(e){return e.disable?"none":"auto"}),k=["#fff59d","#ffab91","#c5e1a5","#80deea","#b39ddb","#eeeeee","#ef5350","#9c27b0","#1e88e5","#43a047"],C=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.yLabel,a=e.unit;return r.a.createElement(E,{disable:0===t.length},r.a.createElement(O.f,{height:350},r.a.createElement(O.e,{data:t,margin:{top:50,left:30,bottom:50,right:50}},t&&t[0]&&Object.keys(t[0]).filter(function(e){return"year"!==e}).map(function(e,t){return r.a.createElement(O.d,{key:e,type:"monotone",dot:!1,dataKey:e,stroke:k[t%k.length]})}),r.a.createElement(O.a,{stroke:"#ccc",strokeDasharray:"5 5"}),r.a.createElement(O.h,{dataKey:"year",tick:{fill:"white"},height:40}),r.a.createElement(O.i,{width:80,tick:{fill:"white"},name:"CO2 emissions",unit:a},r.a.createElement(O.b,{angle:270,position:"left",style:{textAnchor:"middle",fill:"white"}},n)),r.a.createElement(O.c,null),r.a.createElement(O.g,{contentStyle:{background:this.props.theme.darkBG,color:"white"}}))))}}]),t}(a.Component),w=Object(p.c)(C),x=n(165);function D(){var e=Object(m.a)(["\n  display: inline-block;\n  vertical-align: middle;\n"]);return D=function(){return e},e}function S(){var e=Object(m.a)(["\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  background: ",";\n  border-radius: 3px;\n  transition: all 150ms;\n\n  "," {\n    visibility: ",";\n  }\n"]);return S=function(){return e},e}function P(){var e=Object(m.a)(["\n  // Hide checkbox visually but remain accessible to screen readers.\n  // Source: https://polished.js.org/docs/#hidevisually\n  border: 0;\n  clip: rect(0 0 0 0);\n  clippath: inset(50%);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n"]);return P=function(){return e},e}function B(){var e=Object(m.a)(["\n  fill: none;\n  stroke: white;\n  stroke-width: 2px;\n"]);return B=function(){return e},e}var F=p.b.svg(B()),L=p.b.input.attrs({type:"checkbox"})(P()),M=p.b.div(S(),function(e){return e.checked?e.theme.accentColor:"white"},F,function(e){return e.checked?"visible":"hidden"}),z=p.b.div(D()),I=function(e){var t=e.className,n=e.checked,a=Object(x.a)(e,["className","checked"]);return r.a.createElement(z,{className:t},r.a.createElement(L,Object.assign({checked:n},a)),r.a.createElement(M,{checked:n},r.a.createElement(F,{viewBox:"0 0 24 24"},r.a.createElement("polyline",{points:"20 6 9 17 4 12"}))))};function N(){var e=Object(m.a)(["\n  display: inline;\n  position: absolute;\n  top: 40%;\n  left: 50%;\n"]);return N=function(){return e},e}function G(){var e=Object(m.a)(["\n  background: ",";\n  position: relative;\n"]);return G=function(){return e},e}function V(){var e=Object(m.a)(["\n  padding: 10px 0px;\n\n  label {\n    margin-right: 20px;\n    margin-left: 5px;\n\n    span {\n      color: white;\n      margin-left: 10px;\n    }\n  }\n"]);return V=function(){return e},e}function W(){var e=Object(m.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return W=function(){return e},e}var A=n(421),J=p.b.div(W()),K=p.b.div(V()),T=p.b.div(G(),function(e){return e.theme.darkBG}),Y=p.b.div(N()),q=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).handleChange=function(e){var t=n.state.selectedCountries;if(e.length>t.length){var a=A.filter(function(e){return!t.includes(e)},e);a[0]&&n.fetchCountryData(a[0].value)}else{var r=A.filter(function(t){return!e.includes(t)},t);r[0]&&n.setState({countryData:Object(f.a)({},n.state.countryData,Object(d.a)({},r[0].value,void 0))})}n.setState({selectedCountries:e})},n.fetchCountryData=function(e){n.setState({loading:!0}),fetch("/api/countryData?country=".concat(e)).then(function(e){return e.json()}).then(function(t){A.find(A.propEq("value",e))(n.state.selectedCountries)?n.setState({loading:!1,countryData:Object(f.a)({},n.state.countryData,Object(d.a)({},e,t))}):n.setState({loading:!1})}).catch(function(e){n.setState({loading:!1}),console.error(e)})},n.parseForChart=function(e){var t=n.state.perCapita,a={};Object.keys(n.state.countryData).forEach(function(e){var r=n.state.countryData[e];for(var i in r){var c=r[i],o=parseInt(c.co2.Value.val),l=parseInt(c.population.Value.val),u=t?(o/l*1e3).toFixed(3):(o/1e3).toFixed(3);a[c.Year.val]=Object(f.a)({},a[c.Year.val],Object(d.a)({},c["Country or Area"].val,u))}});var r=[];return Object.keys(a).forEach(function(e){var t=a[e];r.push(Object(f.a)({year:e},t))}),r},n.parseForSelect=function(e){return Object.keys(e).map(function(t){return{value:t,label:e[t]}})},n.togglePerCapita=function(){n.setState({perCapita:!n.state.perCapita})},n.state={countries:{},selectedCountries:[],countryData:{},perCapita:!1,loading:!1},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/countries").then(function(e){return e.json()}).then(function(t){e.setState({countries:t})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this.parseForChart(this.state.countryData),t=this.parseForSelect(this.state.countries),n=this.state.perCapita?"CO2 Emissions (kt) per 1000 Capita":"CO2 Emissions (Mt)",a=this.state.perCapita?"kt":"Mt";return r.a.createElement(J,null,r.a.createElement(b.a,{onChange:this.handleChange,isMulti:!0,name:"countries",components:g()(),options:t}),r.a.createElement(K,null,r.a.createElement("label",null,r.a.createElement(I,{checked:this.state.perCapita,onChange:this.togglePerCapita}),r.a.createElement("span",null,"Per Capita")),r.a.createElement("label",null,r.a.createElement(I,{checked:this.state.withPCs,onChange:this.toggleWithPCs}),r.a.createElement("span",null,"Show Power Countries"))),r.a.createElement(T,null,r.a.createElement(Y,null,r.a.createElement(y.PacmanLoader,{sizeUnit:"px",size:25,color:this.props.theme.accentColor,loading:this.state.loading})),r.a.createElement(w,{data:e,yLabel:n,unit:a})))}}]),t}(a.Component),H=Object(p.c)(q);function R(){var e=Object(m.a)(["\n  position: fixed;\n  bottom: 0;\n  height: 50px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n\n  p {\n    color: 'white';\n    font-size: 12px;\n    margin: 0;\n    margin-left: 20px;\n  }\n"]);return R=function(){return e},e}function U(){var e=Object(m.a)(["\n  height: 50px;\n  color: white;\n  display: flex;\n  align-items: center; /* align vertical */\n\n  p {\n    display: inline;\n    font-size: 26px;\n    font-family: 'Times New Roman', Times, serif;\n    margin: 16px 0px 0px 20px;\n  }\n"]);return U=function(){return e},e}function Z(){var e=Object(m.a)(["\n  margin: 20px;\n"]);return Z=function(){return e},e}function $(){var e=Object(m.a)(["\n  height: 100%;\n  background-image: linear-gradient(\n    0.75turn,\n    ",",\n    ","\n  );\n"]);return $=function(){return e},e}var Q=p.b.div($(),function(e){return e.theme.primaryColorPink},function(e){return e.theme.primaryColorBlue}),X=p.b.div(Z()),_=p.b.div(U()),ee=p.b.div(R()),te=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(Q,null,r.a.createElement(_,null,r.a.createElement("p",null,"CO2 VIZ")),r.a.createElement(X,null,this.props.children),r.a.createElement(ee,null,r.a.createElement("p",null,"Made by Linda Lev\xe4nen, 2019")))}}]),t}(a.Component),ne={primaryColorPink:"#e66465",primaryColorBlue:"#9198e5",accentColor:"#e66465",darkBG:"#00000073"},ae=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"root"},r.a.createElement(p.a,{theme:ne},r.a.createElement(te,null,r.a.createElement(H,null))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[190,1,2]]]);
//# sourceMappingURL=main.9419f6d4.chunk.js.map